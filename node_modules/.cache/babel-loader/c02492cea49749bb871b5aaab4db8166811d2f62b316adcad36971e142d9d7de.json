{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nimport * as React from 'react';\nimport { withMap } from './context';\nvar Image = function (_super) {\n  __extends(Image, _super);\n  function Image() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  Image.prototype.componentDidMount = function () {\n    this.loadImage(this.props);\n  };\n  Image.prototype.componentWillUnmount = function () {\n    Image.removeImage(this.props);\n  };\n  Image.prototype.componentDidUpdate = function (prevProps) {\n    var id = prevProps.id;\n    if (prevProps.map !== this.props.map) {\n      Image.removeImage(this.props);\n    }\n    if (this.props.map && !this.props.map.hasImage(id)) {\n      this.loadImage(this.props);\n    }\n  };\n  Image.prototype.render = function () {\n    return null;\n  };\n  Image.prototype.loadImage = function (props) {\n    var _this = this;\n    var map = props.map,\n      id = props.id,\n      url = props.url,\n      data = props.data,\n      options = props.options,\n      onError = props.onError;\n    if (data) {\n      map.addImage(id, data, options);\n      this.loaded();\n    } else if (url) {\n      map.loadImage(url, function (error, image) {\n        if (error) {\n          if (onError) {\n            onError(error);\n          }\n          return;\n        }\n        map.addImage(id, image, options);\n        _this.loaded();\n      });\n    }\n  };\n  Image.removeImage = function (props) {\n    var id = props.id,\n      map = props.map;\n    if (map && map.getStyle()) {\n      map.removeImage(id);\n    }\n  };\n  Image.prototype.loaded = function () {\n    var onLoaded = this.props.onLoaded;\n    if (onLoaded) {\n      onLoaded();\n    }\n  };\n  return Image;\n}(React.Component);\nexport default withMap(Image);","map":{"version":3,"names":["React","withMap","Image","_super","__extends","prototype","componentDidMount","loadImage","props","componentWillUnmount","removeImage","componentDidUpdate","prevProps","id","map","hasImage","render","_this","url","data","options","onError","addImage","loaded","error","image","getStyle","onLoaded","Component"],"sources":["/Users/mikolakondratuk/FossoSushi/node_modules/react-mapbox-gl/src/image.tsx"],"sourcesContent":["import * as React from 'react';\nimport { withMap } from './context';\nimport { Map } from 'mapbox-gl';\n\ninterface ImageOptionsType {\n  pixelRatio?: number;\n  sdf?: boolean;\n}\n\ntype ImageDataType =\n  | HTMLImageElement\n  | ArrayBufferView\n  | { width: number; height: number; data: Uint8Array | Uint8ClampedArray }\n  | ImageData;\n\nexport interface Props {\n  id: string;\n  url?: string;\n  data?: ImageDataType;\n  options?: ImageOptionsType;\n  onLoaded?: () => void;\n  onError?: (error: Error) => void;\n  map: Map;\n}\n\nclass Image extends React.Component<Props> {\n  public componentDidMount() {\n    this.loadImage(this.props);\n  }\n\n  public componentWillUnmount() {\n    Image.removeImage(this.props);\n  }\n\n  public componentDidUpdate(prevProps: Props) {\n    const { id } = prevProps;\n\n    if (prevProps.map !== this.props.map) {\n      // Remove image from old map\n      Image.removeImage(this.props);\n    }\n\n    if (this.props.map && !this.props.map.hasImage(id)) {\n      // Add missing image to map\n      this.loadImage(this.props);\n    }\n  }\n\n  public render() {\n    return null;\n  }\n\n  private loadImage(props: Props) {\n    const { map, id, url, data, options, onError } = props;\n\n    if (data) {\n      map.addImage(id, data, options);\n      this.loaded();\n    } else if (url) {\n      map.loadImage(url, (error: Error | undefined, image: ImageDataType) => {\n        if (error) {\n          if (onError) {\n            onError(error);\n          }\n\n          return;\n        }\n        map.addImage(id, image, options);\n        this.loaded();\n      });\n    }\n  }\n\n  private static removeImage(props: Props) {\n    const { id, map } = props;\n    if (map && map.getStyle()) {\n      map.removeImage(id);\n    }\n  }\n  private loaded() {\n    const { onLoaded } = this.props;\n    if (onLoaded) {\n      onLoaded();\n    }\n  }\n}\n\nexport default withMap(Image);\n"],"mappings":";;;;;;;;;;;;;;;;;;;AAAA,OAAO,KAAKA,KAAK,MAAM,OAAO;AAC9B,SAASC,OAAO,QAAQ,WAAW;AAwBnC,IAAAC,KAAA,aAAAC,MAAA;EAAoBC,SAAA,CAAAF,KAAA,EAAAC,MAAA;EAApB,SAAAD,MAAA;;EA4DA;EA3DSA,KAAA,CAAAG,SAAA,CAAAC,iBAAiB,GAAxB;IACE,IAAI,CAACC,SAAS,CAAC,IAAI,CAACC,KAAK,CAAC;EAC5B,CAAC;EAEMN,KAAA,CAAAG,SAAA,CAAAI,oBAAoB,GAA3B;IACEP,KAAK,CAACQ,WAAW,CAAC,IAAI,CAACF,KAAK,CAAC;EAC/B,CAAC;EAEMN,KAAA,CAAAG,SAAA,CAAAM,kBAAkB,GAAzB,UAA0BC,SAAgB;IAChC,IAAAC,EAAA,GAAAD,SAAA,CAAAC,EAAE;IAEV,IAAID,SAAS,CAACE,GAAG,KAAK,IAAI,CAACN,KAAK,CAACM,GAAG,EAAE;MAEpCZ,KAAK,CAACQ,WAAW,CAAC,IAAI,CAACF,KAAK,CAAC;;IAG/B,IAAI,IAAI,CAACA,KAAK,CAACM,GAAG,IAAI,CAAC,IAAI,CAACN,KAAK,CAACM,GAAG,CAACC,QAAQ,CAACF,EAAE,CAAC,EAAE;MAElD,IAAI,CAACN,SAAS,CAAC,IAAI,CAACC,KAAK,CAAC;;EAE9B,CAAC;EAEMN,KAAA,CAAAG,SAAA,CAAAW,MAAM,GAAb;IACE,OAAO,IAAI;EACb,CAAC;EAEOd,KAAA,CAAAG,SAAA,CAAAE,SAAS,GAAjB,UAAkBC,KAAY;IAA9B,IAAAS,KAAA;IACU,IAAAH,GAAA,GAAAN,KAAA,CAAAM,GAAG;MAAED,EAAA,GAAAL,KAAA,CAAAK,EAAE;MAAEK,GAAA,GAAAV,KAAA,CAAAU,GAAG;MAAEC,IAAA,GAAAX,KAAA,CAAAW,IAAI;MAAEC,OAAA,GAAAZ,KAAA,CAAAY,OAAO;MAAEC,OAAA,GAAAb,KAAA,CAAAa,OAAO;IAE5C,IAAIF,IAAI,EAAE;MACRL,GAAG,CAACQ,QAAQ,CAACT,EAAE,EAAEM,IAAI,EAAEC,OAAO,CAAC;MAC/B,IAAI,CAACG,MAAM,EAAE;KACd,MAAM,IAAIL,GAAG,EAAE;MACdJ,GAAG,CAACP,SAAS,CAACW,GAAG,EAAE,UAACM,KAAwB,EAAEC,KAAoB;QAChE,IAAID,KAAK,EAAE;UACT,IAAIH,OAAO,EAAE;YACXA,OAAO,CAACG,KAAK,CAAC;;UAGhB;;QAEFV,GAAG,CAACQ,QAAQ,CAACT,EAAE,EAAEY,KAAK,EAAEL,OAAO,CAAC;QAChCH,KAAI,CAACM,MAAM,EAAE;MACf,CAAC,CAAC;;EAEN,CAAC;EAEcrB,KAAA,CAAAQ,WAAW,GAA1B,UAA2BF,KAAY;IAC7B,IAAAK,EAAA,GAAAL,KAAA,CAAAK,EAAE;MAAEC,GAAA,GAAAN,KAAA,CAAAM,GAAG;IACf,IAAIA,GAAG,IAAIA,GAAG,CAACY,QAAQ,EAAE,EAAE;MACzBZ,GAAG,CAACJ,WAAW,CAACG,EAAE,CAAC;;EAEvB,CAAC;EACOX,KAAA,CAAAG,SAAA,CAAAkB,MAAM,GAAd;IACU,IAAAI,QAAA,QAAAnB,KAAA,CAAAmB,QAAQ;IAChB,IAAIA,QAAQ,EAAE;MACZA,QAAQ,EAAE;;EAEd,CAAC;EACH,OAAAzB,KAAC;AAAD,CAAC,CA5DmBF,KAAK,CAAC4B,SAAS;AA8DnC,eAAe3B,OAAO,CAACC,KAAK,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}